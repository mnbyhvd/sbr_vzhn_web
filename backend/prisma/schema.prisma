generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model Project {
  id          Int      @id @default(autoincrement())
  title       String
  description String   @default("")
  image       String?
  client      String   @default("")
  industry    String   @default("")
  technologies String  @default("")
  details     String   @default("")
  bgColor     String   @default("#ffffff")
  textColor   String   @default("#222222")
  order       Int?
  createdAt   DateTime @default(now())
  directions  ProjectDirection[]
  // Новые опциональные поля
  startDate   DateTime?
  endDate     DateTime?
  team        String? // JSON или текст
  links       String? // JSON или текст
  status      String?
  curator     String?
  budget      String?
  tools       String?
  feedback    String?
  presentation String?
}

model Partner {
  id        Int    @id @default(autoincrement())
  name      String
  logo      String
  textColor String
  bgColor   String
  order     Int?
}

model VacancyCategory {
  id   Int    @id @default(autoincrement())
  name String @unique
  vacancies Vacancy[]
}

model Vacancy {
  id          Int    @id @default(autoincrement())
  title       String
  description String
  requirements String
  textColor   String
  bgColor     String
  createdAt   DateTime @default(now())
  category    VacancyCategory? @relation(fields: [categoryId], references: [id])
  categoryId  Int?
  responses   VacancyResponse[]
  // Новые опциональные поля
  salary      String?
  location    String?
  workFormat  String?
  schedule    String?
  publishedAt DateTime?
  hrContact   String?
  bonuses     String?
  selectionStages String?
  stack       String?
  experience  String?
  education   String?
  links       String?
  pdf         String?
}

model TeamMember {
  id        Int    @id @default(autoincrement())
  name      String
  role      String
  image     String
  textColor String
  bgColor   String
  order     Int?
}

model SiteSettings {
  id        Int    @id @default(autoincrement())
  colors    String 
  texts     String 
  contacts  String 
  socials   String 
  qr        String 
  misc      String 
}

model Direction {
  id        Int    @id @default(autoincrement())
  title     String
  description String
  gridSize  Int
  textColor String
  bgColor   String
  order     Int?
  projects  ProjectDirection[]
}

model Faq {
  id        Int    @id @default(autoincrement())
  question  String
  answer    String
}

model Request {
  id        Int    @id @default(autoincrement())
  name      String
  email     String
  message   String
  createdAt DateTime @default(now())
}

model InternationalExperience {
  id        Int    @id @default(autoincrement())
  title     String
  details   String?
  order     Int?
}

model VacancyResponse {
  id         Int      @id @default(autoincrement())
  name       String
  email      String
  phone      String
  message    String
  createdAt  DateTime @default(now())
  vacancy    Vacancy  @relation(fields: [vacancyId], references: [id])
  vacancyId  Int
}

// Join table for many-to-many Project <-> Direction
model ProjectDirection {
  project   Project   @relation(fields: [projectId], references: [id], onDelete: Cascade)
  projectId Int
  direction Direction @relation(fields: [directionId], references: [id], onDelete: Cascade)
  directionId Int

  @@id([projectId, directionId])
}
